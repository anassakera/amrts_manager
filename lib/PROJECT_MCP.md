# ğŸ—ï¸ MCP - Master Context Protocol
## Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ AMRTS Manager

**ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:** 2025-01-15
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 2.0.0 (Feature-First Architecture)
**Ø§Ù„Ø­Ø§Ù„Ø©:** Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±

---

## ğŸ“‹ ÙÙ‡Ø±Ø³ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
2. [Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©](#Ø§Ù„Ø¨Ù†ÙŠØ©-Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©)
3. [Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ°](#Ø®Ø·Ø©-Ø§Ù„ØªÙ†ÙÙŠØ°)
4. [Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø·ÙˆØ±](#Ø¯Ù„ÙŠÙ„-Ø§Ù„Ù…Ø·ÙˆØ±)
5. [Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„ÙƒÙˆØ¯](#Ù…Ø¹Ø§ÙŠÙŠØ±-Ø§Ù„ÙƒÙˆØ¯)
6. [Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ©](#Ø£Ù…Ø«Ù„Ø©-Ø¹Ù…Ù„ÙŠØ©)

---

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

### Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙÙŠ Ù…ØµÙ†Ø¹ Ø£Ù„Ù…Ù†ÙŠÙˆÙ… ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…Ù†Ù‡Ø¬ÙŠØ© **CMUP (CoÃ»t Moyen Unitaire PondÃ©rÃ©)**.

### Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
- **Frontend:** Flutter + Dart
- **Backend:** PHP (Pure) + RESTful API
- **Database:** MySQL (VPS) + SQL Server (Local)
- **State Management:** Riverpod
- **Design Pattern:** Feature-First Architecture + Glassmorphism UI

### Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©
```
Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… (SMP)
       â†“
  1ï¸âƒ£ FONDERIE (Ø§Ù„ØµÙ‡Ø±)
       â†“
  Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ (Billetes)
       â†“
  2ï¸âƒ£ EXTRUSION (Ø§Ù„Ø¨Ø«Ù‚)
       â†“
  Ø§Ù„Ù‚Ø¶Ø¨Ø§Ù† Ø§Ù„Ø®Ø§Ù… (Barres Brut)
       â†“
  3ï¸âƒ£ PEINTURE (Ø§Ù„Ø·Ù„Ø§Ø¡)
       â†“
  Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ (SPF)
```

---

## ğŸ›ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

### Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© (Feature-First)

```
lib/
â”‚
â”œâ”€â”€ main.dart                      # Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
â”‚
â”œâ”€â”€ shared/                        # Ù…ÙˆØ§Ø±Ø¯ Ù…Ø´ØªØ±ÙƒØ© Ø¹Ø¨Ø± ÙƒÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”‚   â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”œâ”€â”€ app_config.dart           # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”‚   â”‚   â”‚   â””â”€â”€ env.dart                  # Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”‚   â”œâ”€â”€ app_constants.dart        # Ø«ÙˆØ§Ø¨Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”‚   â”‚   â”‚   â””â”€â”€ api_endpoints.dart        # Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ language/
â”‚   â”‚   â”‚   â”œâ”€â”€ language.dart             # Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª
â”‚   â”‚   â”‚   â””â”€â”€ language_provider.dart    # Provider Ø§Ù„Ù„ØºØ©
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ theme/
â”‚   â”‚       â”œâ”€â”€ app_theme.dart            # Ø«ÙŠÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”‚   â”‚       â”œâ”€â”€ colors.dart               # Ø§Ù„Ø£Ù„ÙˆØ§Ù†
â”‚   â”‚       â””â”€â”€ text_styles.dart          # Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Øµ
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ routes.dart                   # Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªÙ†Ù‚Ù„
â”‚   â”‚
â”‚   â”œâ”€â”€ widgets/                           # Widgets Ù‚Ø§Ø¨Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
â”‚   â”‚   â”œâ”€â”€ custom_button.dart
â”‚   â”‚   â”œâ”€â”€ custom_text_field.dart
â”‚   â”‚   â”œâ”€â”€ loading_widget.dart
â”‚   â”‚   â”œâ”€â”€ error_widget.dart
â”‚   â”‚   â”œâ”€â”€ glassmorphism_container.dart
â”‚   â”‚   â””â”€â”€ search_able_dropdown.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                             # ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ø§Ù…Ø©
â”‚   â”‚   â”œâ”€â”€ validators.dart                # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”‚   â”œâ”€â”€ formatters.dart                # ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…/Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®
â”‚   â”‚   â”œâ”€â”€ helpers.dart                   # ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
â”‚   â”‚   â””â”€â”€ extensions.dart                # String/DateTime extensions
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                          # Ø®Ø¯Ù…Ø§Øª Ø¹Ø§Ù…Ø© Ù…Ø´ØªØ±ÙƒØ©
â”‚   â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”‚   â”œâ”€â”€ api_client.dart           # Ø¹Ù…ÙŠÙ„ API Ù…ÙˆØ­Ø¯
â”‚   â”‚   â”‚   â”œâ”€â”€ dio_client.dart           # Dio configuration
â”‚   â”‚   â”‚   â””â”€â”€ network_info.dart         # ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”œâ”€â”€ local_storage.dart        # SharedPreferences wrapper
â”‚   â”‚   â”‚   â””â”€â”€ cache_service.dart        # Caching service
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ calculation/
â”‚   â”‚       â”œâ”€â”€ calculation_service.dart   # Ø­Ø³Ø§Ø¨Ø§Øª Ø¹Ø§Ù…Ø©
â”‚   â”‚       â””â”€â”€ cmup_calculator.dart       # Ø­Ø³Ø§Ø¨Ø§Øª CMUP
â”‚   â”‚
â”‚   â””â”€â”€ models/                            # Models Ù…Ø´ØªØ±ÙƒØ©
â”‚       â”œâ”€â”€ base_model.dart                # Base model class
â”‚       â”œâ”€â”€ api_response.dart              # Ø§Ø³ØªØ¬Ø§Ø¨Ø© API Ù…ÙˆØ­Ø¯Ø©
â”‚       â””â”€â”€ error_model.dart               # Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
â”‚
â””â”€â”€ screens/                               # â­ Ø§Ù„Ø´Ø§Ø´Ø§Øª (Features)
    â”‚
    â”œâ”€â”€ home/                              # ğŸ  Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â””â”€â”€ home_model.dart
    â”‚   â”‚   â””â”€â”€ api_service/
    â”‚   â”‚       â””â”€â”€ home_api_service.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ providers/
    â”‚   â”‚   â””â”€â”€ home_provider.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ widgets/
    â”‚   â”‚   â”œâ”€â”€ home_card.dart
    â”‚   â”‚   â””â”€â”€ home_header.dart
    â”‚   â”‚
    â”‚   â””â”€â”€ home_screen.dart
    â”‚
    â”œâ”€â”€ auth/                              # ğŸ” Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â””â”€â”€ user_model.dart
    â”‚   â”‚   â””â”€â”€ api_service/
    â”‚   â”‚       â””â”€â”€ auth_api_service.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ providers/
    â”‚   â”‚   â””â”€â”€ auth_provider.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ widgets/
    â”‚   â”‚   â””â”€â”€ login_form.dart
    â”‚   â”‚
    â”‚   â””â”€â”€ auth_screen.dart
    â”‚
    â”œâ”€â”€ production/                        # ğŸ­ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ (Feature Ø±Ø¦ÙŠØ³ÙŠ)
    â”‚   â”‚
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â”œâ”€â”€ fonderie_model.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ fonderie_item_model.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ extrusion_model.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ extrusion_production_model.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ extrusion_arret_model.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ extrusion_culot_model.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ peinture_model.dart
    â”‚   â”‚   â”‚   â””â”€â”€ cmup_model.dart
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â”€ api_service/
    â”‚   â”‚       â”œâ”€â”€ production_api_service.dart    # API Ø¹Ø§Ù… Ù„Ù„Ø¥Ù†ØªØ§Ø¬
    â”‚   â”‚       â”œâ”€â”€ fonderie_api_service.dart
    â”‚   â”‚       â”œâ”€â”€ extrusion_api_service.dart
    â”‚   â”‚       â”œâ”€â”€ peinture_api_service.dart
    â”‚   â”‚       â””â”€â”€ cmup_api_service.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ providers/
    â”‚   â”‚   â”œâ”€â”€ production_provider.dart           # Provider Ø±Ø¦ÙŠØ³ÙŠ
    â”‚   â”‚   â”œâ”€â”€ fonderie_provider.dart
    â”‚   â”‚   â”œâ”€â”€ extrusion_provider.dart
    â”‚   â”‚   â”œâ”€â”€ peinture_provider.dart
    â”‚   â”‚   â””â”€â”€ cmup_provider.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ widgets/
    â”‚   â”‚   â”œâ”€â”€ fonderie/
    â”‚   â”‚   â”‚   â”œâ”€â”€ fonderie_card.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ fonderie_form.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ fonderie_item_table.dart
    â”‚   â”‚   â”‚   â””â”€â”€ fonderie_summary.dart
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ extrusion/
    â”‚   â”‚   â”‚   â”œâ”€â”€ extrusion_card.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ extrusion_form.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ extrusion_production_table.dart
    â”‚   â”‚   â”‚   â”œâ”€â”€ extrusion_arret_form.dart
    â”‚   â”‚   â”‚   â””â”€â”€ extrusion_culot_form.dart
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ peinture/
    â”‚   â”‚   â”‚   â”œâ”€â”€ peinture_card.dart
    â”‚   â”‚   â”‚   â””â”€â”€ peinture_form.dart
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â”€ shared/
    â”‚   â”‚       â”œâ”€â”€ production_table_editor.dart
    â”‚   â”‚       â”œâ”€â”€ cmup_calculator_widget.dart
    â”‚   â”‚       â””â”€â”€ production_summary_card.dart
    â”‚   â”‚
    â”‚   â””â”€â”€ screens/
    â”‚       â”œâ”€â”€ production_screen.dart             # Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Tabs)
    â”‚       â”œâ”€â”€ fonderie_screen.dart               # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØµÙ‡Ø±
    â”‚       â”œâ”€â”€ fonderie_edit_screen.dart          # Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ ØµÙ‡Ø±
    â”‚       â”œâ”€â”€ extrusion_screen.dart              # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø«Ù‚
    â”‚       â”œâ”€â”€ extrusion_edit_screen.dart         # Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø«Ù‚
    â”‚       â”œâ”€â”€ peinture_screen.dart               # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¡
    â”‚       â””â”€â”€ peinture_edit_screen.dart          # Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø·Ù„Ø§Ø¡
    â”‚
    â”œâ”€â”€ sales/                             # ğŸ’° Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â”œâ”€â”€ sale_model.dart
    â”‚   â”‚   â”‚   â””â”€â”€ sale_item_model.dart
    â”‚   â”‚   â””â”€â”€ api_service/
    â”‚   â”‚       â””â”€â”€ sales_api_service.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ providers/
    â”‚   â”‚   â””â”€â”€ sales_provider.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ widgets/
    â”‚   â”‚   â”œâ”€â”€ sale_card.dart
    â”‚   â”‚   â””â”€â”€ sale_form.dart
    â”‚   â”‚
    â”‚   â””â”€â”€ screens/
    â”‚       â”œâ”€â”€ sales_screen.dart
    â”‚       â””â”€â”€ sales_edit_screen.dart
    â”‚
    â”œâ”€â”€ purchases/                         # ğŸ›’ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â”œâ”€â”€ purchase_model.dart
    â”‚   â”‚   â”‚   â””â”€â”€ purchase_item_model.dart
    â”‚   â”‚   â””â”€â”€ api_service/
    â”‚   â”‚       â””â”€â”€ purchases_api_service.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ providers/
    â”‚   â”‚   â””â”€â”€ purchases_provider.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ widgets/
    â”‚   â”‚   â”œâ”€â”€ purchase_card.dart
    â”‚   â”‚   â””â”€â”€ purchase_form.dart
    â”‚   â”‚
    â”‚   â””â”€â”€ screens/
    â”‚       â”œâ”€â”€ purchases_screen.dart
    â”‚       â””â”€â”€ edit_invoice_screen.dart
    â”‚
    â”œâ”€â”€ inventory/                         # ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â”œâ”€â”€ inventory_item_model.dart
    â”‚   â”‚   â”‚   â””â”€â”€ stock_movement_model.dart
    â”‚   â”‚   â””â”€â”€ api_service/
    â”‚   â”‚       â””â”€â”€ inventory_api_service.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ providers/
    â”‚   â”‚   â””â”€â”€ inventory_provider.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ widgets/
    â”‚   â”‚   â”œâ”€â”€ inventory_card.dart
    â”‚   â”‚   â””â”€â”€ stock_movement_list.dart
    â”‚   â”‚
    â”‚   â””â”€â”€ screens/
    â”‚       â””â”€â”€ inventory_screen.dart
    â”‚
    â”œâ”€â”€ clients/                           # ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â””â”€â”€ client_model.dart
    â”‚   â”‚   â””â”€â”€ api_service/
    â”‚   â”‚       â””â”€â”€ clients_api_service.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ providers/
    â”‚   â”‚   â””â”€â”€ clients_provider.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ widgets/
    â”‚   â”‚   â””â”€â”€ client_card.dart
    â”‚   â”‚
    â”‚   â””â”€â”€ screens/
    â”‚       â””â”€â”€ clients_screen.dart
    â”‚
    â”œâ”€â”€ financial/                         # ğŸ’µ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â””â”€â”€ transaction_model.dart
    â”‚   â”‚   â””â”€â”€ api_service/
    â”‚   â”‚       â””â”€â”€ financial_api_service.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ providers/
    â”‚   â”‚   â””â”€â”€ financial_provider.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ widgets/
    â”‚   â”‚   â””â”€â”€ transaction_card.dart
    â”‚   â”‚
    â”‚   â””â”€â”€ screens/
    â”‚       â””â”€â”€ financial_transactions_screen.dart
    â”‚
    â”œâ”€â”€ users/                             # ğŸ‘¤ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”‚   â””â”€â”€ user_model.dart
    â”‚   â”‚   â””â”€â”€ api_service/
    â”‚   â”‚       â””â”€â”€ users_api_service.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ providers/
    â”‚   â”‚   â””â”€â”€ users_provider.dart
    â”‚   â”‚
    â”‚   â”œâ”€â”€ widgets/
    â”‚   â”‚   â””â”€â”€ user_card.dart
    â”‚   â”‚
    â”‚   â””â”€â”€ screens/
    â”‚       â”œâ”€â”€ users_management_screen.dart
    â”‚       â””â”€â”€ profile_screen.dart
    â”‚
    â””â”€â”€ settings/                          # âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        â”œâ”€â”€ data/
        â”‚   â”œâ”€â”€ models/
        â”‚   â”‚   â””â”€â”€ settings_model.dart
        â”‚   â””â”€â”€ api_service/
        â”‚       â””â”€â”€ settings_api_service.dart
        â”‚
        â”œâ”€â”€ providers/
        â”‚   â””â”€â”€ settings_provider.dart
        â”‚
        â”œâ”€â”€ widgets/
        â”‚   â””â”€â”€ settings_item.dart
        â”‚
        â””â”€â”€ screens/
            â””â”€â”€ settings_screen.dart
```

### Ù…Ø²Ø§ÙŠØ§ Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ù†ÙŠØ©

âœ… **Ø¨Ø³ÙŠØ·Ø© ÙˆÙˆØ§Ø¶Ø­Ø©:** ÙƒÙ„ feature ÙÙŠ Ù…Ø¬Ù„Ø¯ ÙˆØ§Ø­Ø¯
âœ… **Ø³Ù‡Ù„Ø© Ø§Ù„ØªÙˆØ³Ø¹:** Ø¥Ø¶Ø§ÙØ© feature Ø¬Ø¯ÙŠØ¯ = Ù…Ø¬Ù„Ø¯ Ø¬Ø¯ÙŠØ¯
âœ… **Ù…Ù†Ø·Ù‚ÙŠØ© Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†:** ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø´Ø§Ø´Ø§Øª
âœ… **Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØµÙŠØ§Ù†Ø©:** ÙƒÙ„ Ø´ÙŠØ¡ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù€ feature ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯
âœ… **ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù€ Coupling:** ÙƒÙ„ feature Ù…Ø³ØªÙ‚Ù„

---

## ğŸ“Š Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ°

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø© (ÙŠÙˆÙ… 1)

#### Ø§Ù„Ø®Ø·ÙˆØ© 1: ØªØ­Ø¯ÙŠØ« pubspec.yaml

```yaml
dependencies:
  flutter:
    sdk: flutter

  # State Management
  flutter_riverpod: ^2.4.9

  # Network
  dio: ^5.4.0
  http: ^1.1.2

  # Local Storage
  shared_preferences: ^2.2.2

  # Utils
  intl: ^0.18.1
  logger: ^2.0.2+1

  # UI
  shimmer: ^3.0.0
  cached_network_image: ^3.3.0
  flutter_screenutil: ^5.9.0

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.1
```

#### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

```bash
# Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
mkdir lib/shared
mkdir lib/shared/core
mkdir lib/shared/routes
mkdir lib/shared/widgets
mkdir lib/shared/utils
mkdir lib/shared/services
mkdir lib/shared/models
mkdir lib/screens
```

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù€ Shared Layer (ÙŠÙˆÙ… 2-3)

#### Ø§Ù„ÙŠÙˆÙ… 2: Core & Config

- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/core/config/app_config.dart`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/core/config/env.dart`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/core/constants/app_constants.dart`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/core/constants/api_endpoints.dart`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/core/theme/` (colors, text_styles, app_theme)
- [ ] Ù†Ù‚Ù„ `shared/core/language/` Ù…Ù† Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø­Ø§Ù„ÙŠ

#### Ø§Ù„ÙŠÙˆÙ… 3: Services & Utils

- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/services/network/api_client.dart`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/services/network/dio_client.dart`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/services/storage/local_storage.dart`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/utils/validators.dart`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/utils/formatters.dart`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `shared/widgets/` (custom_button, loading_widget, etc.)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Feature Production (ÙŠÙˆÙ… 4-10)

#### Ø§Ù„ÙŠÙˆÙ… 4-5: Fonderie (Ø§Ù„ØµÙ‡Ø±)

**Ø§Ù„Ø¨Ù†ÙŠØ©:**
```
screens/production/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ fonderie_model.dart
â”‚   â”‚   â””â”€â”€ fonderie_item_model.dart
â”‚   â””â”€â”€ api_service/
â”‚       â””â”€â”€ fonderie_api_service.dart
â”œâ”€â”€ providers/
â”‚   â””â”€â”€ fonderie_provider.dart
â”œâ”€â”€ widgets/
â”‚   â””â”€â”€ fonderie/
â”‚       â”œâ”€â”€ fonderie_card.dart
â”‚       â”œâ”€â”€ fonderie_form.dart
â”‚       â””â”€â”€ fonderie_item_table.dart
â””â”€â”€ screens/
    â”œâ”€â”€ fonderie_screen.dart
    â””â”€â”€ fonderie_edit_screen.dart
```

**Ø§Ù„Ù…Ù‡Ø§Ù…:**
- [ ] Ù†Ù‚Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† `screens/production_screen/fonderie_*`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `FonderieModel` Ù…Ù† `Map<String, dynamic>`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `FonderieApiService`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `FonderieProvider` (Riverpod)
- [ ] ØªÙ‚Ø³ÙŠÙ… `fonderie_edit_screen.dart` Ø¥Ù„Ù‰ widgets
- [ ] Ø±Ø¨Ø· UI Ø¨Ù€ Provider

#### Ø§Ù„ÙŠÙˆÙ… 6-8: Extrusion (Ø§Ù„Ø¨Ø«Ù‚)

**Ù†ÙØ³ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©:**
- [ ] Ù†Ù‚Ù„ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† `screens/production_screen/extrusion_*`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Models (ExtrusionModel, ExtrusionProductionModel, etc.)
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `ExtrusionApiService`
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `ExtrusionProvider`
- [ ] ØªÙ‚Ø³ÙŠÙ… `extrusion_edit_screen.dart` (53 KB!)
- [ ] Ø±Ø¨Ø· UI Ø¨Ù€ Provider

#### Ø§Ù„ÙŠÙˆÙ… 9-10: Peinture (Ø§Ù„Ø·Ù„Ø§Ø¡)

- [ ] ØªØ·ÙˆÙŠØ± Peinture Ù…Ù† Ø§Ù„ØµÙØ± (Ø§Ù„Ø´Ø§Ø´Ø© Ø´Ø¨Ù‡ ÙØ§Ø±ØºØ© Ø­Ø§Ù„ÙŠØ§Ù‹)
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Models
- [ ] Ø¥Ù†Ø´Ø§Ø¡ API Service
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Provider
- [ ] ØªØ·ÙˆÙŠØ± UI ÙƒØ§Ù…Ù„Ø©

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù€ Features (ÙŠÙˆÙ… 11-20)

#### ÙƒÙ„ Feature ÙŠØªØ¨Ø¹ Ù†ÙØ³ Ø§Ù„Ù†Ù…Ø·:

```bash
screens/[feature_name]/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ models/
â”‚   â””â”€â”€ api_service/
â”œâ”€â”€ providers/
â”œâ”€â”€ widgets/
â””â”€â”€ screens/
```

**Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ:**
- ÙŠÙˆÙ… 11-12: Sales
- ÙŠÙˆÙ… 13-14: Purchases
- ÙŠÙˆÙ… 15-16: Inventory
- ÙŠÙˆÙ… 17-18: Clients
- ÙŠÙˆÙ… 19-20: Users & Settings

---

## ğŸ‘¨â€ğŸ’» Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø·ÙˆØ±

### 1ï¸âƒ£ Ø¥Ù†Ø´Ø§Ø¡ Feature Ø¬Ø¯ÙŠØ¯ (Ù…Ø«Ø§Ù„: Production/Fonderie)

#### Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ù†ÙŠØ©

```bash
# Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª
mkdir -p lib/screens/production/data/models
mkdir -p lib/screens/production/data/api_service
mkdir -p lib/screens/production/providers
mkdir -p lib/screens/production/widgets/fonderie
mkdir -p lib/screens/production/screens
```

#### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ù†Ø´Ø§Ø¡ Model

```dart
// lib/screens/production/data/models/fonderie_model.dart

import 'package:intl/intl.dart';

class FonderieModel {
  final int? id;
  final String refFondrie;
  final DateTime operationDate;
  final String operationTime;
  final double totalQuantity;
  final double totalCout;
  final int operationsCount;
  final String status;
  final List<FonderieItemModel> items;

  FonderieModel({
    this.id,
    required this.refFondrie,
    required this.operationDate,
    required this.operationTime,
    required this.totalQuantity,
    required this.totalCout,
    required this.operationsCount,
    this.status = 'completed',
    required this.items,
  });

  // From JSON
  factory FonderieModel.fromJson(Map<String, dynamic> json) {
    return FonderieModel(
      id: json['id'] as int?,
      refFondrie: json['ref_fondrie'] as String,
      operationDate: DateTime.parse(json['operation_date'] as String),
      operationTime: json['operation_time'] as String,
      totalQuantity: (json['total_quantity'] as num).toDouble(),
      totalCout: (json['total_cout'] as num).toDouble(),
      operationsCount: json['operations_count'] as int,
      status: json['status'] as String? ?? 'completed',
      items: (json['items'] as List<dynamic>)
          .map((e) => FonderieItemModel.fromJson(e as Map<String, dynamic>))
          .toList(),
    );
  }

  // To JSON
  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'ref_fondrie': refFondrie,
      'operation_date': DateFormat('yyyy-MM-dd').format(operationDate),
      'operation_time': operationTime,
      'total_quantity': totalQuantity,
      'total_cout': totalCout,
      'operations_count': operationsCount,
      'status': status,
      'items': items.map((e) => e.toJson()).toList(),
    };
  }

  // CopyWith
  FonderieModel copyWith({
    int? id,
    String? refFondrie,
    DateTime? operationDate,
    String? operationTime,
    double? totalQuantity,
    double? totalCout,
    int? operationsCount,
    String? status,
    List<FonderieItemModel>? items,
  }) {
    return FonderieModel(
      id: id ?? this.id,
      refFondrie: refFondrie ?? this.refFondrie,
      operationDate: operationDate ?? this.operationDate,
      operationTime: operationTime ?? this.operationTime,
      totalQuantity: totalQuantity ?? this.totalQuantity,
      totalCout: totalCout ?? this.totalCout,
      operationsCount: operationsCount ?? this.operationsCount,
      status: status ?? this.status,
      items: items ?? this.items,
    );
  }
}

// Item Model
class FonderieItemModel {
  final int? id;
  final String refArticle;
  final String articleName;
  final double quantity;
  final double dechetFondrie;
  final double billete;
  final double propane;
  final double cout;

  FonderieItemModel({
    this.id,
    required this.refArticle,
    required this.articleName,
    required this.quantity,
    required this.dechetFondrie,
    required this.billete,
    required this.propane,
    required this.cout,
  });

  factory FonderieItemModel.fromJson(Map<String, dynamic> json) {
    return FonderieItemModel(
      id: json['id'] as int?,
      refArticle: json['ref_article'] as String,
      articleName: json['article_name'] as String,
      quantity: (json['quantity'] as num).toDouble(),
      dechetFondrie: (json['dechet_fondrie'] as num).toDouble(),
      billete: (json['billete'] as num).toDouble(),
      propane: (json['propane'] as num).toDouble(),
      cout: (json['cout'] as num).toDouble(),
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'ref_article': refArticle,
      'article_name': articleName,
      'quantity': quantity,
      'dechet_fondrie': dechetFondrie,
      'billete': billete,
      'propane': propane,
      'cout': cout,
    };
  }
}
```

#### Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ù†Ø´Ø§Ø¡ API Service

```dart
// lib/screens/production/data/api_service/fonderie_api_service.dart

import 'package:dio/dio.dart';
import '../../../../shared/services/network/dio_client.dart';
import '../../../../shared/core/constants/api_endpoints.dart';
import '../models/fonderie_model.dart';

class FonderieApiService {
  final DioClient _dioClient;

  FonderieApiService(this._dioClient);

  // Get All
  Future<List<FonderieModel>> getAllFonderies() async {
    try {
      final response = await _dioClient.get(ApiEndpoints.fonderie.getAll);

      if (response.data['success'] == true) {
        final List<dynamic> records = response.data['records'];
        return records.map((json) => FonderieModel.fromJson(json)).toList();
      } else {
        throw Exception(response.data['message']);
      }
    } on DioException catch (e) {
      throw _handleDioError(e);
    }
  }

  // Get By ID
  Future<FonderieModel> getFonderieById(int id) async {
    try {
      final response = await _dioClient.get(
        '${ApiEndpoints.fonderie.getById}?id=$id',
      );

      if (response.data['success'] == true) {
        return FonderieModel.fromJson(response.data['data']);
      } else {
        throw Exception(response.data['message']);
      }
    } on DioException catch (e) {
      throw _handleDioError(e);
    }
  }

  // Create
  Future<FonderieModel> createFonderie(FonderieModel fonderie) async {
    try {
      final response = await _dioClient.post(
        ApiEndpoints.fonderie.create,
        data: fonderie.toJson(),
      );

      if (response.data['success'] == true) {
        return FonderieModel.fromJson(response.data['data']);
      } else {
        throw Exception(response.data['message']);
      }
    } on DioException catch (e) {
      throw _handleDioError(e);
    }
  }

  // Update
  Future<FonderieModel> updateFonderie(FonderieModel fonderie) async {
    try {
      final response = await _dioClient.put(
        ApiEndpoints.fonderie.update,
        data: fonderie.toJson(),
      );

      if (response.data['success'] == true) {
        return FonderieModel.fromJson(response.data['data']);
      } else {
        throw Exception(response.data['message']);
      }
    } on DioException catch (e) {
      throw _handleDioError(e);
    }
  }

  // Delete
  Future<void> deleteFonderie(int id) async {
    try {
      final response = await _dioClient.delete(
        '${ApiEndpoints.fonderie.delete}?id=$id',
      );

      if (response.data['success'] != true) {
        throw Exception(response.data['message']);
      }
    } on DioException catch (e) {
      throw _handleDioError(e);
    }
  }

  Exception _handleDioError(DioException e) {
    if (e.type == DioExceptionType.connectionTimeout) {
      return Exception('Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„');
    } else if (e.type == DioExceptionType.receiveTimeout) {
      return Exception('Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    } else if (e.type == DioExceptionType.badResponse) {
      return Exception('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…: ${e.response?.statusCode}');
    } else if (e.type == DioExceptionType.connectionError) {
      return Exception('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª');
    }
    return Exception('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹');
  }
}
```

#### Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø¥Ù†Ø´Ø§Ø¡ Provider (Riverpod)

```dart
// lib/screens/production/providers/fonderie_provider.dart

import 'package:flutter_riverpod/flutter_riverpod.dart';
import '../data/models/fonderie_model.dart';
import '../data/api_service/fonderie_api_service.dart';

// State
class FonderieState {
  final List<FonderieModel> fonderies;
  final bool isLoading;
  final String? errorMessage;
  final String searchQuery;

  FonderieState({
    this.fonderies = const [],
    this.isLoading = false,
    this.errorMessage,
    this.searchQuery = '',
  });

  FonderieState copyWith({
    List<FonderieModel>? fonderies,
    bool? isLoading,
    String? errorMessage,
    String? searchQuery,
  }) {
    return FonderieState(
      fonderies: fonderies ?? this.fonderies,
      isLoading: isLoading ?? this.isLoading,
      errorMessage: errorMessage,
      searchQuery: searchQuery ?? this.searchQuery,
    );
  }

  // Filtered Fonderies
  List<FonderieModel> get filteredFonderies {
    if (searchQuery.isEmpty) return fonderies;

    return fonderies.where((fonderie) {
      return fonderie.refFondrie
              .toLowerCase()
              .contains(searchQuery.toLowerCase()) ||
          fonderie.items.any((item) => item.articleName
              .toLowerCase()
              .contains(searchQuery.toLowerCase()));
    }).toList();
  }
}

// StateNotifier
class FonderieNotifier extends StateNotifier<FonderieState> {
  final FonderieApiService _apiService;

  FonderieNotifier(this._apiService) : super(FonderieState()) {
    loadFonderies();
  }

  // Load All
  Future<void> loadFonderies() async {
    state = state.copyWith(isLoading: true, errorMessage: null);

    try {
      final fonderies = await _apiService.getAllFonderies();
      state = state.copyWith(
        isLoading: false,
        fonderies: fonderies,
      );
    } catch (e) {
      state = state.copyWith(
        isLoading: false,
        errorMessage: e.toString(),
      );
    }
  }

  // Add
  Future<void> addFonderie(FonderieModel fonderie) async {
    state = state.copyWith(isLoading: true);

    try {
      final newFonderie = await _apiService.createFonderie(fonderie);
      state = state.copyWith(
        isLoading: false,
        fonderies: [...state.fonderies, newFonderie],
      );
    } catch (e) {
      state = state.copyWith(
        isLoading: false,
        errorMessage: e.toString(),
      );
      rethrow;
    }
  }

  // Update
  Future<void> updateFonderie(FonderieModel fonderie) async {
    state = state.copyWith(isLoading: true);

    try {
      final updatedFonderie = await _apiService.updateFonderie(fonderie);
      final updatedList = state.fonderies.map((f) {
        return f.id == updatedFonderie.id ? updatedFonderie : f;
      }).toList();

      state = state.copyWith(
        isLoading: false,
        fonderies: updatedList,
      );
    } catch (e) {
      state = state.copyWith(
        isLoading: false,
        errorMessage: e.toString(),
      );
      rethrow;
    }
  }

  // Delete
  Future<void> deleteFonderie(int id) async {
    state = state.copyWith(isLoading: true);

    try {
      await _apiService.deleteFonderie(id);
      final updatedList = state.fonderies.where((f) => f.id != id).toList();

      state = state.copyWith(
        isLoading: false,
        fonderies: updatedList,
      );
    } catch (e) {
      state = state.copyWith(
        isLoading: false,
        errorMessage: e.toString(),
      );
      rethrow;
    }
  }

  // Set Search Query
  void setSearchQuery(String query) {
    state = state.copyWith(searchQuery: query);
  }
}

// Provider
final fonderieApiServiceProvider = Provider<FonderieApiService>((ref) {
  final dioClient = ref.watch(dioClientProvider);
  return FonderieApiService(dioClient);
});

final fonderieProvider = StateNotifierProvider<FonderieNotifier, FonderieState>((ref) {
  final apiService = ref.watch(fonderieApiServiceProvider);
  return FonderieNotifier(apiService);
});
```

#### Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø¥Ù†Ø´Ø§Ø¡ Screen

```dart
// lib/screens/production/screens/fonderie_screen.dart

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import '../providers/fonderie_provider.dart';
import '../widgets/fonderie/fonderie_card.dart';
import 'fonderie_edit_screen.dart';

class FonderieScreen extends ConsumerWidget {
  const FonderieScreen({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final state = ref.watch(fonderieProvider);

    // Loading State
    if (state.isLoading && state.fonderies.isEmpty) {
      return const Center(
        child: CircularProgressIndicator(),
      );
    }

    // Error State
    if (state.errorMessage != null && state.fonderies.isEmpty) {
      return Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            const Icon(Icons.error_outline, size: 64, color: Colors.red),
            const SizedBox(height: 16),
            Text(state.errorMessage!),
            const SizedBox(height: 16),
            ElevatedButton.icon(
              onPressed: () {
                ref.read(fonderieProvider.notifier).loadFonderies();
              },
              icon: const Icon(Icons.refresh),
              label: const Text('Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©'),
            ),
          ],
        ),
      );
    }

    final filteredFonderies = state.filteredFonderies;

    // Empty State
    if (filteredFonderies.isEmpty) {
      return Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            const Icon(Icons.inbox, size: 64, color: Colors.grey),
            const SizedBox(height: 16),
            const Text('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª ØµÙ‡Ø±'),
            const SizedBox(height: 16),
            ElevatedButton.icon(
              onPressed: () => _navigateToAdd(context),
              icon: const Icon(Icons.add),
              label: const Text('Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ØµÙ‡Ø±'),
            ),
          ],
        ),
      );
    }

    // List View
    return Column(
      children: [
        // Header with Add Button
        Padding(
          padding: const EdgeInsets.all(16),
          child: Row(
            mainAxisAlignment: MainAxisAlignment.spaceBetween,
            children: [
              Text(
                'Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØµÙ‡Ø± (${filteredFonderies.length})',
                style: const TextStyle(
                  fontSize: 20,
                  fontWeight: FontWeight.bold,
                ),
              ),
              ElevatedButton.icon(
                onPressed: () => _navigateToAdd(context),
                icon: const Icon(Icons.add),
                label: const Text('Ø¥Ø¶Ø§ÙØ©'),
              ),
            ],
          ),
        ),

        // List
        Expanded(
          child: RefreshIndicator(
            onRefresh: () async {
              await ref.read(fonderieProvider.notifier).loadFonderies();
            },
            child: ListView.builder(
              padding: const EdgeInsets.symmetric(horizontal: 16),
              itemCount: filteredFonderies.length,
              itemBuilder: (context, index) {
                final fonderie = filteredFonderies[index];
                return FonderieCard(
                  fonderie: fonderie,
                  onTap: () => _navigateToEdit(context, fonderie),
                  onDelete: () => _showDeleteDialog(context, ref, fonderie),
                );
              },
            ),
          ),
        ),
      ],
    );
  }

  void _navigateToAdd(BuildContext context) {
    Navigator.push(
      context,
      MaterialPageRoute(
        builder: (context) => const FonderieEditScreen(),
      ),
    );
  }

  void _navigateToEdit(BuildContext context, FonderieModel fonderie) {
    Navigator.push(
      context,
      MaterialPageRoute(
        builder: (context) => FonderieEditScreen(fonderie: fonderie),
      ),
    );
  }

  void _showDeleteDialog(
    BuildContext context,
    WidgetRef ref,
    FonderieModel fonderie,
  ) {
    showDialog(
      context: context,
      builder: (context) => AlertDialog(
        title: const Text('ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù'),
        content: Text('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØµÙ‡Ø± ${fonderie.refFondrie}ØŸ'),
        actions: [
          TextButton(
            onPressed: () => Navigator.pop(context),
            child: const Text('Ø¥Ù„ØºØ§Ø¡'),
          ),
          TextButton(
            onPressed: () async {
              Navigator.pop(context);
              try {
                await ref
                    .read(fonderieProvider.notifier)
                    .deleteFonderie(fonderie.id!);
                if (context.mounted) {
                  ScaffoldMessenger.of(context).showSnackBar(
                    const SnackBar(content: Text('ØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ù†Ø¬Ø§Ø­')),
                  );
                }
              } catch (e) {
                if (context.mounted) {
                  ScaffoldMessenger.of(context).showSnackBar(
                    SnackBar(content: Text('ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù: $e')),
                  );
                }
              }
            },
            style: TextButton.styleFrom(foregroundColor: Colors.red),
            child: const Text('Ø­Ø°Ù'),
          ),
        ],
      ),
    );
  }
}
```

#### Ø§Ù„Ø®Ø·ÙˆØ© 6: Ø¥Ù†Ø´Ø§Ø¡ Widget (FonderieCard)

```dart
// lib/screens/production/widgets/fonderie/fonderie_card.dart

import 'package:flutter/material.dart';
import 'package:intl/intl.dart';
import '../../data/models/fonderie_model.dart';
import '../../../../shared/widgets/glassmorphism_container.dart';

class FonderieCard extends StatelessWidget {
  final FonderieModel fonderie;
  final VoidCallback? onTap;
  final VoidCallback? onDelete;

  const FonderieCard({
    Key? key,
    required this.fonderie,
    this.onTap,
    this.onDelete,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return GlassmorphismContainer(
      margin: const EdgeInsets.only(bottom: 12),
      child: InkWell(
        onTap: onTap,
        borderRadius: BorderRadius.circular(16),
        child: Padding(
          padding: const EdgeInsets.all(16),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              // Header
              Row(
                mainAxisAlignment: MainAxisAlignment.spaceBetween,
                children: [
                  // Ref
                  Text(
                    fonderie.refFondrie,
                    style: const TextStyle(
                      fontSize: 18,
                      fontWeight: FontWeight.bold,
                      color: Colors.white,
                    ),
                  ),
                  // Status
                  Container(
                    padding: const EdgeInsets.symmetric(
                      horizontal: 12,
                      vertical: 4,
                    ),
                    decoration: BoxDecoration(
                      color: _getStatusColor(fonderie.status),
                      borderRadius: BorderRadius.circular(12),
                    ),
                    child: Text(
                      _getStatusText(fonderie.status),
                      style: const TextStyle(
                        color: Colors.white,
                        fontSize: 12,
                      ),
                    ),
                  ),
                ],
              ),
              const SizedBox(height: 12),

              // Date & Time
              Row(
                children: [
                  const Icon(Icons.calendar_today, size: 16, color: Colors.white70),
                  const SizedBox(width: 8),
                  Text(
                    DateFormat('yyyy-MM-dd').format(fonderie.operationDate),
                    style: const TextStyle(color: Colors.white70),
                  ),
                  const SizedBox(width: 16),
                  const Icon(Icons.access_time, size: 16, color: Colors.white70),
                  const SizedBox(width: 8),
                  Text(
                    fonderie.operationTime,
                    style: const TextStyle(color: Colors.white70),
                  ),
                ],
              ),
              const SizedBox(height: 12),

              const Divider(color: Colors.white24),
              const SizedBox(height: 12),

              // Stats
              Row(
                children: [
                  Expanded(
                    child: _buildStat(
                      'Ø§Ù„ÙƒÙ…ÙŠØ©',
                      '${fonderie.totalQuantity.toStringAsFixed(2)} ÙƒØº',
                      Icons.scale,
                    ),
                  ),
                  Expanded(
                    child: _buildStat(
                      'Ø§Ù„ØªÙƒÙ„ÙØ©',
                      '${fonderie.totalCout.toStringAsFixed(2)} Ø¯.Ù…',
                      Icons.attach_money,
                    ),
                  ),
                  Expanded(
                    child: _buildStat(
                      'Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª',
                      '${fonderie.operationsCount}',
                      Icons.list_alt,
                    ),
                  ),
                ],
              ),

              // Items Count
              if (fonderie.items.isNotEmpty) ...[
                const SizedBox(height: 12),
                const Divider(color: Colors.white24),
                const SizedBox(height: 8),
                Text(
                  'Ø§Ù„Ø¹Ù†Ø§ØµØ±: ${fonderie.items.length}',
                  style: const TextStyle(color: Colors.white70, fontSize: 12),
                ),
              ],

              // Delete Button
              if (onDelete != null) ...[
                const SizedBox(height: 12),
                Align(
                  alignment: Alignment.centerLeft,
                  child: IconButton(
                    onPressed: onDelete,
                    icon: const Icon(Icons.delete, color: Colors.red),
                    tooltip: 'Ø­Ø°Ù',
                  ),
                ),
              ],
            ],
          ),
        ),
      ),
    );
  }

  Widget _buildStat(String label, String value, IconData icon) {
    return Column(
      children: [
        Icon(icon, size: 20, color: Colors.white70),
        const SizedBox(height: 4),
        Text(
          value,
          style: const TextStyle(
            fontSize: 16,
            fontWeight: FontWeight.bold,
            color: Colors.white,
          ),
        ),
        Text(
          label,
          style: const TextStyle(
            fontSize: 12,
            color: Colors.white70,
          ),
        ),
      ],
    );
  }

  Color _getStatusColor(String status) {
    switch (status) {
      case 'completed':
        return Colors.green;
      case 'pending':
        return Colors.orange;
      case 'in_progress':
        return Colors.blue;
      case 'cancelled':
        return Colors.red;
      default:
        return Colors.grey;
    }
  }

  String _getStatusText(String status) {
    switch (status) {
      case 'completed':
        return 'Ù…ÙƒØªÙ…Ù„';
      case 'pending':
        return 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±';
      case 'in_progress':
        return 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°';
      case 'cancelled':
        return 'Ù…Ù„ØºÙŠ';
      default:
        return status;
    }
  }
}
```

---

## ğŸ“ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„ÙƒÙˆØ¯

### 1. Ø§Ù„ØªØ³Ù…ÙŠØ© (Naming Conventions)

```dart
// Files - snake_case
// fonderie_model.dart
// fonderie_api_service.dart

// Classes - PascalCase
class FonderieModel {}
class FonderieProvider {}

// Variables & Functions - camelCase
String refFondrie = '';
void calculateTotal() {}

// Constants - lowerCamelCase
const double defaultTaxRate = 0.20;

// Private - prefix _
String _privateVariable = '';
void _privateMethod() {}
```

### 2. Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ù„ÙØ§Øª

**ØªØ±ØªÙŠØ¨ Imports:**
```dart
// 1. Dart imports
import 'dart:async';

// 2. Flutter imports
import 'package:flutter/material.dart';

// 3. Package imports
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:dio/dio.dart';

// 4. Project imports
import '../../data/models/fonderie_model.dart';
import '../../../shared/widgets/loading_widget.dart';
```

**ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø¯Ø§Ø®Ù„ Class:**
```dart
class MyClass {
  // 1. Static members
  static const String version = '1.0.0';

  // 2. Fields
  final String name;
  final int age;

  // 3. Constructor
  MyClass({required this.name, required this.age});

  // 4. Named constructors
  MyClass.empty() : name = '', age = 0;

  // 5. Getters
  String get fullInfo => '$name - $age';

  // 6. Public methods
  void doSomething() {}

  // 7. Private methods
  void _privateMethod() {}
}
```

### 3. Error Handling

```dart
// ÙÙŠ API Service
try {
  final response = await _dioClient.get(endpoint);
  return response.data;
} on DioException catch (e) {
  throw _handleDioError(e);
} catch (e) {
  throw Exception('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: $e');
}

// ÙÙŠ Provider
try {
  final data = await _apiService.getData();
  state = state.copyWith(data: data);
} catch (e) {
  state = state.copyWith(errorMessage: e.toString());
  rethrow; // Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ±ÙŠØ¯ Ø£Ù† ÙŠØ¹Ø±Ù Ø§Ù„Ù€ UI Ø¨Ø§Ù„Ø®Ø·Ø£
}

// ÙÙŠ UI
try {
  await ref.read(provider.notifier).save();
  ScaffoldMessenger.of(context).showSnackBar(
    const SnackBar(content: Text('ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­')),
  );
} catch (e) {
  ScaffoldMessenger.of(context).showSnackBar(
    SnackBar(content: Text('ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: $e')),
  );
}
```

### 4. Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª

```dart
/// Documentation comment
/// ÙŠÙØ³ØªØ®Ø¯Ù… Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚
class MyClass {}

// Regular comment
// Ù„Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø©
final variable = '';

// TODO: ÙˆØµÙ Ù…Ø§ ÙŠØ¬Ø¨ ÙØ¹Ù„Ù‡
// FIXME: ÙˆØµÙ Ù…Ø§ ÙŠØ¬Ø¨ Ø¥ØµÙ„Ø§Ø­Ù‡
// HACK: Ø´Ø±Ø­ Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ø¤Ù‚Øª
```

---

## ğŸ¨ Shared Widgets

### GlassmorphismContainer

```dart
// lib/shared/widgets/glassmorphism_container.dart

import 'dart:ui';
import 'package:flutter/material.dart';

class GlassmorphismContainer extends StatelessWidget {
  final Widget child;
  final double? width;
  final double? height;
  final EdgeInsetsGeometry? padding;
  final EdgeInsetsGeometry? margin;
  final double borderRadius;
  final double blurSigma;
  final Color? backgroundColor;
  final Border? border;

  const GlassmorphismContainer({
    Key? key,
    required this.child,
    this.width,
    this.height,
    this.padding,
    this.margin,
    this.borderRadius = 20,
    this.blurSigma = 10,
    this.backgroundColor,
    this.border,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Container(
      width: width,
      height: height,
      margin: margin,
      decoration: BoxDecoration(
        gradient: LinearGradient(
          colors: [
            (backgroundColor ?? Colors.white).withOpacity(0.1),
            (backgroundColor ?? Colors.white).withOpacity(0.05),
          ],
          begin: Alignment.topLeft,
          end: Alignment.bottomRight,
        ),
        borderRadius: BorderRadius.circular(borderRadius),
        border: border ??
            Border.all(
              color: Colors.white.withOpacity(0.2),
              width: 1.5,
            ),
        boxShadow: [
          BoxShadow(
            color: Colors.black.withOpacity(0.1),
            blurRadius: 20,
            offset: const Offset(0, 10),
          ),
        ],
      ),
      child: ClipRRect(
        borderRadius: BorderRadius.circular(borderRadius),
        child: BackdropFilter(
          filter: ImageFilter.blur(sigmaX: blurSigma, sigmaY: blurSigma),
          child: Container(
            padding: padding,
            child: child,
          ),
        ),
      ),
    );
  }
}
```

### LoadingWidget

```dart
// lib/shared/widgets/loading_widget.dart

import 'package:flutter/material.dart';

class LoadingWidget extends StatelessWidget {
  final String? message;
  final double size;

  const LoadingWidget({
    Key? key,
    this.message,
    this.size = 40,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Center(
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          SizedBox(
            width: size,
            height: size,
            child: const CircularProgressIndicator(),
          ),
          if (message != null) ...[
            const SizedBox(height: 16),
            Text(
              message!,
              style: const TextStyle(fontSize: 14),
            ),
          ],
        ],
      ),
    );
  }
}
```

### CustomButton

```dart
// lib/shared/widgets/custom_button.dart

import 'package:flutter/material.dart';

class CustomButton extends StatelessWidget {
  final String text;
  final VoidCallback? onPressed;
  final bool isLoading;
  final IconData? icon;
  final Color? backgroundColor;
  final Color? textColor;
  final double? width;
  final double height;

  const CustomButton({
    Key? key,
    required this.text,
    this.onPressed,
    this.isLoading = false,
    this.icon,
    this.backgroundColor,
    this.textColor,
    this.width,
    this.height = 50,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return SizedBox(
      width: width,
      height: height,
      child: ElevatedButton(
        onPressed: isLoading ? null : onPressed,
        style: ElevatedButton.styleFrom(
          backgroundColor: backgroundColor,
          foregroundColor: textColor,
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(12),
          ),
        ),
        child: isLoading
            ? const SizedBox(
                width: 20,
                height: 20,
                child: CircularProgressIndicator(strokeWidth: 2),
              )
            : Row(
                mainAxisSize: MainAxisSize.min,
                children: [
                  if (icon != null) ...[
                    Icon(icon, size: 20),
                    const SizedBox(width: 8),
                  ],
                  Text(text),
                ],
              ),
      ),
    );
  }
}
```

---

## ğŸ”§ API Endpoints

```dart
// lib/shared/core/constants/api_endpoints.dart

class ApiEndpoints {
  static const String baseUrl = 'http://localhost/amrts_manager';

  // Fonderie
  static const fonderie = _FonderieEndpoints();

  // Extrusion
  static const extrusion = _ExtrusionEndpoints();

  // Peinture
  static const peinture = _PeintureEndpoints();
}

class _FonderieEndpoints {
  const _FonderieEndpoints();

  String get getAll => '/api/fonderie/get_all.php';
  String get getById => '/api/fonderie/get_by_id.php';
  String get create => '/api/fonderie/create.php';
  String get update => '/api/fonderie/update.php';
  String get delete => '/api/fonderie/delete.php';
}

class _ExtrusionEndpoints {
  const _ExtrusionEndpoints();

  String get getAll => '/api/extrusion/get_all.php';
  String get getById => '/api/extrusion/get_by_id.php';
  String get create => '/api/extrusion/create.php';
  String get update => '/api/extrusion/update.php';
  String get delete => '/api/extrusion/delete.php';
}

class _PeintureEndpoints {
  const _PeintureEndpoints();

  String get getAll => '/api/peinture/get_all.php';
  String get getById => '/api/peinture/get_by_id.php';
  String get create => '/api/peinture/create.php';
  String get update => '/api/peinture/update.php';
  String get delete => '/api/peinture/delete.php';
}
```

---

## âœ… Checklist

### Ù‚Ø¨Ù„ ÙƒÙ„ Commit

- [ ] `dart format .` - ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¯
- [ ] `flutter analyze` - Ù„Ø§ ØªÙˆØ¬Ø¯ warnings
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ Feature ÙŠØ¯ÙˆÙŠØ§Ù‹
- [ ] Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù€ diff
- [ ] Commit message ÙˆØ§Ø¶Ø­

### Ù‚Ø¨Ù„ ÙƒÙ„ Feature

- [ ] Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¨Ù†ÙŠØ©
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Models
- [ ] Ø¥Ù†Ø´Ø§Ø¡ API Service
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Provider
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Screens
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Widgets
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„

---

## ğŸ“š Ø§Ù„Ù…ÙˆØ§Ø±Ø¯

- [Flutter Documentation](https://flutter.dev/docs)
- [Riverpod Documentation](https://riverpod.dev/)
- [Dio Documentation](https://pub.dev/packages/dio)

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 2025-01-15
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 2.0.0
**Ø§Ù„Ù…Ø·ÙˆØ±:** AMRTS Team